<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/dist/dygraph.css" />
<title>Stock chart</title>
<script type="text/javascript" src="/dist/dygraph.js"></script>

</head>
<body>
	<h2>Elmma Line Diagram</h2>
	<div id="stock_div" style="width: 90%; height: 500px;"></div>

	<script type="text/javascript">
	
		var update_url = null;
	
		function renderDiagram(url) {
			console.log("fetch from: /prices/csv?from=" + from + "&amp;to="
					+ to);
			g = new Dygraph(document.getElementById("stock_div"), url);
		}

		function handleUpdate() {
			var url = document.getElementById("param_url").value;
			renderDiagram(url);
			update_url = url;
		}
		
	</script>

	URL
	<input type="text" id="param_url" size="100" size="20" />
	<input type="submit" value="Update" onClick="handleUpdate()" />
	<script type="text/javascript">
		var from = "2011-05-02";
		var to = "2011-05-04";
		var url = "/prices/csv?from=" + from + "&to=" + to;

		renderDiagram(url);

		document.getElementById("param_url").value = url;
		update_url = url;
		
		//window.intervalId = setInterval(function() {
		//	g.updateOptions({
		//		'file' : update_url
		//	});
		//}, 2000);	
		</script>
</body>
</html>
